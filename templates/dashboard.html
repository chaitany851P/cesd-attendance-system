<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <title>Dashboard | CESD</title>
</head>
<body>
    <div class="mesh-bg"></div>
    <nav class="navbar">
        <h1>CESD CORE</h1>
        <div style="display: flex; align-items: center; gap: 15px;">
            <span style="font-size: 0.8rem; color: var(--text-dim);">{{ faculty }}</span>
            <a href="/logout" style="color: var(--error); text-decoration: none; font-weight: 700; font-size: 0.8rem;">LOGOUT</a>
        </div>
        <!-- Only these three specific people will see the Admin Panel button -->
{% if faculty in ["Mr. Chaitany Thakar", "Mr. Dhruv", "Ms. Khushali"] %}
<a href="/admin" class="btn-primary" style="background: linear-gradient(135deg, #f39c12, #e67e22); color: #000; margin-right: 10px;">
    <i class="fa-solid fa-user-gear"></i> ADMIN PANEL
</a>
{% endif %}
    </nav>
    <div class="container">
        <div class="card" style="margin-bottom: 30px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; flex-wrap: wrap; gap: 15px;">
                <h2 style="margin: 0; font-size: 1.4rem;"><i class="fa-solid fa-people-group" style="color: var(--primary);"></i> Engagement Groups</h2>
                {% if is_instructor %}<a href="/export_attendance" class="btn-primary" style="padding: 10px 15px; font-size: 0.8rem;"><i class="fa-solid fa-file-excel"></i> EXCEL REPORT</a>{% endif %}
            </div>
            <div class="grid">
                {% for group in groups %}<a href="/mark_attendance/{{ group }}" class="group-card"><span>SECTION</span><h3>Group {{ group }}</h3></a>{% endfor %}
            </div>
        </div>
        {% if dept %}
        <div class="card" style="border-top: 4px solid var(--secondary);">
            <h2 style="margin: 0 0 20px 0; font-size: 1.4rem; color: var(--secondary);"><i class="fa-solid fa-graduation-cap"></i> Academic Records</h2>
            <div class="grid">
                {% if dept == 'ALL' %}
                    {% for d in dept_list %}<a href="/mark_dept_attendance/{{ d }}" class="group-card" style="border-color: var(--secondary);"><span>ACADEMIC</span><h3>{{ d }}</h3></a>{% endfor %}
                {% else %}
                    <a href="/mark_dept_attendance/{{ dept }}" class="group-card" style="border-color: var(--secondary); min-width: 180px;"><span>MY DEPT</span><h3>{{ dept }}</h3></a>
                {% endif %}
            </div>
        </div>
        {% endif %}
    </div>
</body>
</html>
